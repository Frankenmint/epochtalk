<!-- Menu -->
<div id="menu-wrap">
  <nav id="menu" data-topbar role="navigation">
    <!-- Logo Section -->
    <h3>
      <a ng-href="/" ng-if="$webConfigs.logo"><img ng-src="{{$webConfigs.logo}}" id="logo" /></a>
      <a ng-href="/" id="logo-text" ng-bind="$webConfigs.title">Epochtalk</a>
    </h3>

    <!-- Login Section -->
    <ul ng-if="!HeaderCtrl.loggedIn()">
      <li>
        <a ng-click="HeaderCtrl.showRegister = true">REGISTER</a>
      </li>
      <li>
        <a ng-click="HeaderCtrl.showLogin = true">LOGIN</a>
      </li>
    </ul>

    <!-- User Dropdown -->
    <ul ng-if="HeaderCtrl.loggedIn()">
      <li class="search">
        <form action="">
          <div>
            <input type="text" name="search" placeholder="Search">
            <label for="search" class="icon-epoch-search"></label>
          </div>
        </form>
      </li>
      <li class="login-dropdown-wrap">
        <div>
          <img ng-src="{{ HeaderCtrl.currentUser.avatar }}" class="avatar">
          <a ui-sref="profile({ username: HeaderCtrl.currentUser.username })" ui-sref-opts="{ reload: true }" ng-bind-html="HeaderCtrl.currentUser.username"></a>
        </div>
        <ul class="login-dropdown">
          <li ng-if="HeaderCtrl.currentUser.isAdmin">
            <a ui-sref="^.admin" ui-sref-opts="{ reload: true }">Admin Panel</a>
          </li>
          <li ng-if="HeaderCtrl.currentUser.isMod && !HeaderCtrl.currentUser.isAdmin">
            <a ui-sref="^.admin-moderation.users({ filter: 'Pending' })" ui-sref-opts="{ reload: true }">Mod Panel</a>
          </li>
          <li>
            <a ui-sref="profile({ username: HeaderCtrl.currentUser.username })" ui-sref-opts="{ reload: true }">Profile</a>
          </li>
          <li>
            <a ng-href="#" ng-click="HeaderCtrl.logout()">Logout</a>
          </li>
        </ul>
      </li>
    </ul>
  </nav>
</div>

<!-- Breadcrumbs -->
<div id="breadcrumbs-wrap">
  <div id="breadcrumbs">
    <ul>
      <li ng-repeat="breadcrumb in HeaderCtrl.breadcrumbs() track by breadcrumb.label" ng-if="breadcrumb.label" ng-class="{ active: $last }">
          <a ng-if="$first && breadcrumb.url" ui-sref="{{ breadcrumb.state }}" ng-bind-html="breadcrumb.label | truncate:30"></a>
          <a ng-if="!$last && !$first && breadcrumb.url" ng-href="{{ breadcrumb.url }}" ng-bind-html="breadcrumb.label | truncate:30"></a>
          <span ng-if="$last || !breadcrumb.url" ng-bind-html="breadcrumb.label | truncate:30"></span>
      </li>
    </ul>
  </div>
</div>

<alert></alert>
